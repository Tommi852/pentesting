##### Tehty osana Tero Karvisen Penetration testing -kurssia. Tehtävät löytyvät osoitteesta terokarvinen.com

# Tehtävä 3

## 1) Skannerien tutkiminen

Kokeilin openVAS skanneria.
Asennus onnistui helposti parilla komennolla, mutta asennus latasi myös paljon tiedostoja, jonka takia lataus kesti hetken.
```
apt-get install openvas
openvas-setup
```
Tämän jälkeen asennus avasi selaimeen ikkunan openVAS dashboardiin.
Käyttäjänimen ja salasanan sai asennuksen lopputeksteistä.

Seuraamalla ohjeita täältä (https://blog.rapid7.com/2016/11/22/how-to-use-openvas-to-audit-the-security-of-your-network-22/)
opin mistä kohteet ja asetukset määritellään. Ohjeet oli ilmeisesti tarkoitettu vanhempaan versioon sillä osa asetuksista löytyi eri paikoista.

Aluksi määrittelin kohteet. Kokeilin HTB:n Jerry konetta ensimmäiseksi kokeilumielessä.
Kohteen pystyi määrittelemään Configuration -> Targets valikon alta.
Tähdestä painamalla sai lisättyä uuden kohteen. Kohteelle annoin IP:ksi 10.10.10.95 eli Jerry koneen osoitteen.
Portit ja muut asetukset pidin vakiona.
Tämän jälkeen scans -> Tasks valikosta pääsin laittamaan skannausken päälle.
Valitsin tähden, josta sai taas New Task valittua ja kohteeksi valitsin Jerry konene, jonka asetin viimeksi.
Muut asetukset pidin vakiona taas sillä ne näyttivät olevan kunnossa. Skannauksesta tuli siis Full and fast.
Tämän jälkeen valitsin vain create task ja taski muodostui. 
Jouduin aloittamaan skannauksen vielä erikseen vihreästä start napista taskin oikeassa reunassa.
Taskin edistymistä pystyi seuraamaan Tasks näkymästä, mutta sivun päivitys piti muuttaa oikealta ylhäältä, jos halusi että tiedot päivittyvät automaattisesti.
Tuloksia pystyi katsomaan results näkymästä.

Tulokset näkyivätkin nätisti vakavuusluokkineen jonossa ja haavoittuvuutta klikkaamalla nähtiinkin, että mikä salasana apachessa oli.

## 2) Skannerien vertailu

Jatkoin edellistä tehtävää lisäämällä openVAS:iin targets osioon vielä neljä muuta kohdetta.
Käytin koneita Bounty (10.10.10.93), DevOops (10.10.10.91), Waldo ( 10.10.10.87 ) ja Sunday ( 10.10.10.76 ).

Sillä välin, kun openVAS ruksutteli kyseisten koneiden haavoittuvuuksia, niin laitoin nikton skannaamaan myös kohteita.

Niktolle piti tehdä tekstitiedosto, jossa kohteet ovat listattuna, jos halusi skannata useamman samaan aikaan.
Tein siis perus tekstitiedoston nimeltä hostnames, johon laitoin joka riville yhden kohteen ip-osoitteen.
Määritin niktolle myös portit 1-1000 ja 8080. Pyörimään nikton laitoin komennolla:
```
nikto -host hostnames -p 1-1000,8080 | tee niktotuloket
```
Tämä vaikutti kuitenkin erittäin hitaalta, joten päätin tarkistaa aluksi kohteista nmap:illa avoimet portit, jonka jälkeen annoin kyseiset portit niktolle tutkittavaksi.
Nmapissa käytin parametrejä 
```
sudo nmap -F -A -sV -Pn 10.10.10.93
```
Katsoin kohteet yksi kerrallaan niktolla komennolla: "nikto -host 10.10.10.93 -p 80" ja portit vaihdoin aina löytyneiksi porteiksi.

OpenVAS näytti tiedot nätisti. Pystyin katsomaan nopeasti miten vakavia haavoittuvuuksia löytyi kustakin skannauksesta.
Yksittäisten haavoittuvuuksien tarkastelu per kohde oli kuitenkin hiukan epäselvä.
OpenVAS on selvästi suunniteltu enemmän isojen kohteiden tarkasteluun ja toistuviin skannauksiin.

Nikto taas näyttää suoraviivaisesti löytyneet haavoittuvuuden, mutta useamman kohteen ja portin tutkiminen on hidasta ja hankalaa.
Tulosten tulkitseminenkin on Niktossa hieman haastavampaa verrattuna openVAS:in selkeään GUI:hin.

## 3) Mirai lähdekoodin tutkiminen

Koodi oli varsin mielenkiintoinen, mutta omat koodaus tiedot eivät auttaneet ymmärtämään puoliakaan koodista.
Salasanat ja tunnukset löytyivät kuitenkin osoitteesta: https://github.com/jgamblin/Mirai-Source-Code/blob/master/mirai/bot/scanner.c

## 4) Tunkeutuminen uuteen HackTheBox koneeseen
Koska tunnilla pääsin jo Jerryyn sisään, niin päätin ottaa toisen koneen kohteeksi.






