###### Tehty osana Tero Karvisen penetraatiokurssin tehtäviä. Tehtävät osoitteessa TeroKarvinen.com

# Tehtävä 2

## H1)
Aluksi tein metasploit tietokannan komennolla msfdb init, jonka jälkeen käynnistin tietokannan ja metasploit konsolin komennolla msfdb start.
Konsolissa käytin komentoa db_nmap, jotta nmap skannauksen tiedot tallentuvat tietokantaan muistiin.

```
db_nmap -F -A -sV 10.10.10.2-254

-F tarkistaa 100 yleisintä porttia nopeasti
-A tarkistaa käyttöjärjestelmän
-sV antaa versionumeron portin takana olevasta ohjelmasta.
```

## H2)
Aloitin asentamalla WebGoatin githubin ohjeiden mukaisesti, jotka löytyvät osoitteesta: https://github.com/WebGoat/WebGoat

Käynnistyksen jälkeen pääsin WebGoatiin käsiksi osoitteesta: http://127.0.0.1:8080/WebGoat/

1)
Aloitin helpolla eli HTTP Basics ensimmäisellä tehtävällä.
Tehtävässä piti lähettää lomakkeella HTTP POST. Lopussa kysyttiin, että oliko kyseisessä lomakkeen lähetyksessä kyseessä POST vai GET, sekä taikanumeroa.
Painamalla F12 saatiin developer console auki, jonka network välilehdeltä nähtii lomakkeesta lähtenyt POST viesti. Kun kyseistä POST:ia painoi saatii oikealle valikolla, josta voitiin tarkastella viestin parametrejä.
Parametreissä luki magic_num: "22", joten tästä saatiinkin vastaukseen tarvittava taikanumero.

2)
Toisena tehtävänä kokeilin Authentication Bypassiä.
Tehtävä tuotti aluksi hieman vaikeuksia, koska en tahtonut löytää firefoxiin http tamperia.
Luin, että käytettäväksi suositeltiin Zap:ia, joten tein tehtävän zapin avulla ja selaimella.
Zap:in asetuksista piti muuttaa aluksi kuuntelu portti pois 8080 portista, koska WebGoat käytti jo porttia.

Zapilla pääsin pysäyttämään HTTP paketit ennen niiden lähetystä, jolloin pystyin muokkaamaan niitä ennen lähetystä.
Pitkän tutkinnan jälkeen sain muokattua paketista sopivan, jotta sivu ohitti turvallisuus kysymykset.
Alkuperäinen HTTP viesti näytti tältä.
``` secQuestion0=asdasd&secQuestion1=asd&jsEnabled=1&verifyMethod=SEC_QUESTIONS&userId=12309746 ```
Muokkasin kysymysten parametrit sellaisiksi, joita palvelusse ei todenäköisesti ole, jonka takia palvelu hyväksyi viestiin.
Muokattu HTTP POST näytti tätlä:
```secQuestion4=asd&secQuestion3=asdasd&jsEnabled=1&verifyMethod=SEC_QUESTIONS&userId=12309746```
Tehtävä meni läpi ja kysyi uutta salasanaa.

3)
Kolmantena tehtävä tein Insecure Loginin.
Painamalla Log in nappia lähti oikean käyttäjän käyttäjänimi ja salasana HTTP POST:ina palvelimella. 
POSTin pystyi katsomaan taas Zapilla, josta pystyi selkokielisenä lukemaan käyttäjänimen ja salasanan.
```{"username":"CaptainJack","password":"BlackPearl"}```




